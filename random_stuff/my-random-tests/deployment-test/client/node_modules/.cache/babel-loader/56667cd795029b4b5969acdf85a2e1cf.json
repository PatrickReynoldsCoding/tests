{"ast":null,"code":"import _regeneratorRuntime from\"/Users/patrickreynolds/repos/tests/random_stuff/deploytests/deployment-test/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/patrickreynolds/repos/tests/random_stuff/deploytests/deployment-test/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/patrickreynolds/repos/tests/random_stuff/deploytests/deployment-test/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/patrickreynolds/repos/tests/random_stuff/deploytests/deployment-test/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Todolist from\"./Todolist\";import React,{useState,useRef,useEffect}from\"react\";// import { v4 as uuidv4 } from 'uuid';\n// import { BrowserRouter, routes, Route } from \"react-router-dom\";\n// apis\nimport{getData}from\"./functions/getData\";import{addTodo}from\"./functions/addTodo\";import{updateChecked}from\"./functions/updatechecked\";import{deleteTodos}from\"./functions/deleteTodos\";import{deleteCompleted}from\"./functions/deleteCompleted\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];//object destructoring\nvar todoNameRef=useRef();var pullTodos=function pullTodos(){getData()// api function\n.then(function(res){return setTodos(res);}).catch(function(err){return console.log(err);});};// when it first loads it gets the db todos\nuseEffect(function(){pullTodos();},[todos]);// this is the dependancy array. it means the function will run everytime the todos array is changed\n//adds todo from input\nvar handleAddTodo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var message,newTodo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:message=todoNameRef.current.value;if(!(message===\"\")){_context.next=3;break;}return _context.abrupt(\"return\");case 3:newTodo={message:message,complete:false};setTodos(function(todos){return[].concat(_toConsumableArray(todos),[newTodo]);});//add newTodo to DB\naddTodo(newTodo);//wipes textbox\ntodoNameRef.current.value=null;console.log(todos);pullTodos();case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleAddTodo(_x){return _ref.apply(this,arguments);};}();//update the complete props in the todo via checkbox and upload to db\nvar toggleComplete=function toggleComplete(id){// patch\nupdateChecked(id);//update todos\npullTodos();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Todolist,{todos:todos,toggleComplete:toggleComplete}),/*#__PURE__*/_jsx(\"input\",{ref:todoNameRef,type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTodo,children:\"Add Todo\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){deleteCompleted();pullTodos();},children:\"Clear Complete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){deleteTodos();pullTodos();},children:\"Delete all!!!\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",todos.filter(function(value){return value.complete===!true;}).length,\" left to do \"]})]});}export default App;","map":{"version":3,"names":["Todolist","React","useState","useRef","useEffect","getData","addTodo","updateChecked","deleteTodos","deleteCompleted","App","todos","setTodos","todoNameRef","pullTodos","then","res","catch","err","console","log","handleAddTodo","e","message","current","value","newTodo","complete","toggleComplete","id","filter","length"],"sources":["/Users/patrickreynolds/repos/tests/random_stuff/deploytests/deployment-test/client/src/App.js"],"sourcesContent":["import Todolist from \"./Todolist\";\nimport React, { useState, useRef, useEffect } from \"react\";\n// import { v4 as uuidv4 } from 'uuid';\n// import { BrowserRouter, routes, Route } from \"react-router-dom\";\n\n// apis\nimport { getData } from \"./functions/getData\";\nimport { addTodo } from \"./functions/addTodo\";\nimport { updateChecked } from \"./functions/updatechecked\";\nimport { deleteTodos } from \"./functions/deleteTodos\";\nimport { deleteCompleted } from \"./functions/deleteCompleted\";\n\nfunction App() {\n  const [todos, setTodos] = useState([]); //object destructoring\n  const todoNameRef = useRef();\n\n  \n  const pullTodos = () => {\n    getData() // api function\n      .then((res) => setTodos(res))\n      .catch((err) => console.log(err));\n  }\n\n  // when it first loads it gets the db todos\n  useEffect(() => {\n    pullTodos();\n  }, [todos]); // this is the dependancy array. it means the function will run everytime the todos array is changed\n  \n  \n\n\n  //adds todo from input\n  const handleAddTodo = async (e) => {\n    const message = todoNameRef.current.value;\n    if (message === \"\") return;\n    const newTodo = { message: message, complete: false };\n    setTodos((todos) => {\n      return [...todos, newTodo];\n    });\n    //add newTodo to DB\n    addTodo(newTodo);\n    //wipes textbox\n    todoNameRef.current.value = null; \n    \n    console.log(todos);\n    pullTodos()\n    \n  };\n\n  //update the complete props in the todo via checkbox and upload to db\n  const toggleComplete = (id) => {\n    // patch\n    updateChecked(id);\n    //update todos\n    pullTodos()\n  };\n\n\n  return (\n    <>\n      <Todolist todos={todos} toggleComplete={toggleComplete}/>\n      <input ref={todoNameRef} type=\"text\" />\n      <button onClick={handleAddTodo}>Add Todo</button>\n      <button onClick={() => {deleteCompleted(); pullTodos();}}>Clear Complete</button>\n      <button onClick={() => {deleteTodos(); pullTodos();}}>Delete all!!!</button>\n      <div> {todos.filter(value => value.complete === !true).length} left to do </div>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"wrBAAA,MAAOA,SAAP,KAAqB,YAArB,CACA,MAAOC,MAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,CAAkCC,SAAlC,KAAmD,OAAnD,CACA;AACA;AAEA;AACA,OAASC,OAAT,KAAwB,qBAAxB,CACA,OAASC,OAAT,KAAwB,qBAAxB,CACA,OAASC,aAAT,KAA8B,2BAA9B,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,OAASC,eAAT,KAAgC,6BAAhC,C,6IAEA,QAASC,IAAT,EAAe,CACb,cAA0BR,QAAQ,CAAC,EAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eAAwC;AACxC,GAAMC,YAAW,CAAGV,MAAM,EAA1B,CAGA,GAAMW,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtBT,OAAO,EAAG;AAAH,CACJU,IADH,CACQ,SAACC,GAAD,QAASJ,SAAQ,CAACI,GAAD,CAAjB,EADR,EAEGC,KAFH,CAES,SAACC,GAAD,QAASC,QAAO,CAACC,GAAR,CAAYF,GAAZ,CAAT,EAFT,EAGD,CAJD,CAMA;AACAd,SAAS,CAAC,UAAM,CACdU,SAAS,GACV,CAFQ,CAEN,CAACH,KAAD,CAFM,CAAT,CAEa;AAKb;AACA,GAAMU,cAAa,4FAAG,iBAAOC,CAAP,wIACdC,OADc,CACJV,WAAW,CAACW,OAAZ,CAAoBC,KADhB,MAEhBF,OAAO,GAAK,EAFI,kEAGdG,OAHc,CAGJ,CAAEH,OAAO,CAAEA,OAAX,CAAoBI,QAAQ,CAAE,KAA9B,CAHI,CAIpBf,QAAQ,CAAC,SAACD,KAAD,CAAW,CAClB,mCAAWA,KAAX,GAAkBe,OAAlB,GACD,CAFO,CAAR,CAGA;AACApB,OAAO,CAACoB,OAAD,CAAP,CACA;AACAb,WAAW,CAACW,OAAZ,CAAoBC,KAApB,CAA4B,IAA5B,CAEAN,OAAO,CAACC,GAAR,CAAYT,KAAZ,EACAG,SAAS,GAbW,sDAAH,kBAAbO,cAAa,4CAAnB,CAiBA;AACA,GAAMO,eAAc,CAAG,QAAjBA,eAAiB,CAACC,EAAD,CAAQ,CAC7B;AACAtB,aAAa,CAACsB,EAAD,CAAb,CACA;AACAf,SAAS,GACV,CALD,CAQA,mBACE,wCACE,KAAC,QAAD,EAAU,KAAK,CAAEH,KAAjB,CAAwB,cAAc,CAAEiB,cAAxC,EADF,cAEE,cAAO,GAAG,CAAEf,WAAZ,CAAyB,IAAI,CAAC,MAA9B,EAFF,cAGE,eAAQ,OAAO,CAAEQ,aAAjB,sBAHF,cAIE,eAAQ,OAAO,CAAE,kBAAM,CAACZ,eAAe,GAAIK,SAAS,GAAI,CAAxD,4BAJF,cAKE,eAAQ,OAAO,CAAE,kBAAM,CAACN,WAAW,GAAIM,SAAS,GAAI,CAApD,2BALF,cAME,2BAAOH,KAAK,CAACmB,MAAN,CAAa,SAAAL,KAAK,QAAIA,MAAK,CAACE,QAAN,GAAmB,CAAC,IAAxB,EAAlB,EAAgDI,MAAvD,kBANF,GADF,CAUD,CAED,cAAerB,IAAf"},"metadata":{},"sourceType":"module"}